<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preload" href="/component---src-layouts-index-jsx-5ba4828c3c9f451142f4.js" as="script"/><link rel="preload" href="/component---src-pages-reactnative-intro-reactnative-expo-upload-image-in-amazons-3-jsx-7132df1a39bbbb0d7191.js" as="script"/><link rel="preload" href="/path---reactnative-intro-reactnative-expo-upload-image-in-amazons-3-586c7e095e534a3909ec.js" as="script"/><link rel="preload" href="/app-23593c6bce6f0d814eb7.js" as="script"/><link rel="preload" href="/commons-313c6b3d5933e7f168aa.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-23593c6bce6f0d814eb7.js","6502461027731969000":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","9453687551911655000":"component---src-pages-about-jsx-88e439d210cb5a7231c7.js","13994203391546835000":"component---src-pages-index-jsx-d4d2d9fd3aed96d2decc.js","2490233139148265500":"component---src-pages-quick-intro-jsx-b07b826a3b9e88da4453.js","14083928229549873000":"component---src-pages-reactnative-intro-index-jsx-7704399810a12e967d06.js","17193172207249224000":"component---src-pages-reactnative-intro-introduction-jsx-2604372c66bb9a49cbb7.js","8994308402413557000":"component---src-pages-reactnative-intro-reactnative-drawer-navigator-jsx-010f3c424a26dd9cd5ac.js","11332510248138455000":"component---src-pages-reactnative-intro-reactnative-expo-camera-jsx-120480fd8141b0ddbeaa.js","11697965716276513000":"component---src-pages-reactnative-intro-reactnative-expo-introduction-jsx-5ea91be4b6240634d7d8.js","8813963782248368000":"component---src-pages-reactnative-intro-reactnative-expo-upload-image-in-amazons-3-jsx-7132df1a39bbbb0d7191.js","17677722782965418000":"component---src-pages-reactnative-intro-reactnative-helloworld-jsx-1ddb42f6578d82a1eb42.js","3376653081180650000":"component---src-pages-reactnative-intro-reactnative-login-jsx-46c853e6625ccf1506ad.js","9841286038976164000":"component---src-pages-reactnative-intro-reactnative-navigation-jsx-6709f7e3d5d872aa53a8.js","12231163554594116000":"component---src-pages-reactnative-intro-reactnative-signup-jsx-28d1a15fa7f5c5065af5.js","3954140758598355500":"path----6611940bd40871b680a6.js","13784418321228782000":"path---offline-plugin-app-shell-fallback-586c7e095e534a3909ec.js","17953591736895156000":"path---about-586c7e095e534a3909ec.js","9347362237655822000":"path---index-586c7e095e534a3909ec.js","16355636089645824000":"path---quick-intro-586c7e095e534a3909ec.js","16382057251519517000":"path---reactnative-intro-586c7e095e534a3909ec.js","15629244752305920000":"path---reactnative-intro-introduction-586c7e095e534a3909ec.js","1420310547242670000":"path---reactnative-intro-reactnative-drawer-navigator-586c7e095e534a3909ec.js","9327458813863586000":"path---reactnative-intro-reactnative-expo-camera-586c7e095e534a3909ec.js","18401569973668311000":"path---reactnative-intro-reactnative-expo-introduction-586c7e095e534a3909ec.js","5016165377822886000":"path---reactnative-intro-reactnative-expo-upload-image-in-amazons-3-586c7e095e534a3909ec.js","15508035087940560000":"path---reactnative-intro-reactnative-helloworld-586c7e095e534a3909ec.js","10062593018361084000":"path---reactnative-intro-reactnative-login-586c7e095e534a3909ec.js","11757534369374070000":"path---reactnative-intro-reactnative-navigation-586c7e095e534a3909ec.js","4204579800167365000":"path---reactnative-intro-reactnative-signup-586c7e095e534a3909ec.js","5217438866945042000":"component---src-layouts-index-jsx-5ba4828c3c9f451142f4.js"}
            //]]>
            </script><style type="text/css" data-styled-components="gqYqWK zOIwx krYZtN dLoFdP hXIxij exrfcB" data-styled-components-is-local="true">/* sc-component-id: sc-bdVaJa */

.krYZtN{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;}
/* sc-component-id: sc-bwzfXH */

.dLoFdP{margin-left:25px;color:white;}.dLoFdP:hover{color:rgba(0,0,0,.2);border-bottom:none;}
/* sc-component-id: sc-htpNat */

.zOIwx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;background:#f8f8f6;}.zOIwx .nav-link{font-size:1.6rem;margin-right:10px;font-weight:200;color:black;}@media screen and (max-width:600px){.zOIwx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.zOIwx section{margin-bottom:20px;}.zOIwx span{display:none;}}
/* sc-component-id: sc-EHOje */

.exrfcB{border:1px solid #41B883;border-radius:3px;margin:0px 4px;padding:25px;font-size:2rem;color:#41B883;display:inline-block;-webkit-transition:all .3s ease;transition:all .3s ease;}.exrfcB:hover{color:white;background:#41B883;}
/* sc-component-id: sc-bZQynM */

.gqYqWK{background:#f8f8f6;padding:25px;text-align:center;}
/* sc-component-id: sc-htoDjs */

.hXIxij{padding:25px;max-width:850px;margin:0 auto;}
</style><title data-react-helmet="true">React native upload image</title><meta data-react-helmet="true" name="description" content="We will share our learnings about reactjs in metaphorical way here"/><link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,+400i,+700,+700i|Space+Mono:400,700" rel="stylesheet"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = location.hash.replace('#', '')
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="manifest" href="/manifest.json"/><meta name="theme-color" content="#c62828"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-313c6b3d5933e7f168aa.js","/app-23593c6bce6f0d814eb7.js","/path---reactnative-intro-reactnative-expo-upload-image-in-amazons-3-586c7e095e534a3909ec.js","/component---src-pages-reactnative-intro-reactnative-expo-upload-image-in-amazons-3-jsx-7132df1a39bbbb0d7191.js","/component---src-layouts-index-jsx-5ba4828c3c9f451142f4.js"
])
  </script><link rel="shortcut icon" href="/static/logo-48.498be729.png"/><style id="gatsby-inlined-css">*{box-sizing:border-box;margin:0;padding:0}table{border-collapse:collapse}table,td,th{border:1px solid #000;padding:5px}html{font-size:10px}a,body,h1,h2,h3,h4,h5,h6,li,p,ul{font-family:Avenir,Helvetica Neue,sans-serif}dl,h1,h2,h3,h4,h5,h6,ol,p,ul{margin:30px 0}dd,dt,li,li>*{margin:10px 0}code,pre{font-family:Space Mono,monospace}h1{font-size:4rem}h2{font-size:3.5rem}h3{font-size:3rem}h4{font-size:2.4rem}h5{font-size:2rem}h6{font-size:1.6rem}a,dd,dt,li,p,th,tr{font-size:1.8rem}a{color:#2973b7;text-decoration:none}a:hover{border-bottom:1px solid #000}label.container{font-size:2em;padding:4px}label.container input{margin-left:6px}.gatsby-highlight{padding-bottom:30px}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Space Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.87;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;box-shadow:.05555555555555555rem .05555555555555555rem 1.1111111111111112rem hsla(0,0%,8%,.37)}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:0}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f27}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b5bec3}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#efc090}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#dc78dc}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#bed6ff}.token.keyword{color:#00d0d0}.token.important,.token.regex{color:#ccdf32}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="1033100988"><!-- react-empty: 2 --><div class="index-container" data-reactid="3"><!-- react-empty: 4 --><main data-reactid="5"><div class="sc-bZQynM gqYqWK" data-reactid="6"><div class="sc-htpNat zOIwx" data-reactid="7"><section data-reactid="8"><a class="nav-link" href="/" data-reactid="9"> HOME </a><a class="nav-link" href="https://sataiva.com" target="_blank" data-reactid="10"> Sataiva Page</a></section><span data-reactid="11"><div class="user-links sc-bdVaJa krYZtN" data-reactid="12"><a class="sc-bwzfXH dLoFdP" href="https://twitter.com/SataivaT" data-reactid="13"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;color:#35495E;width:20px;height:20px;" data-reactid="14"><g data-reactid="15"><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z" data-reactid="16"></path></g></svg></a><a class="sc-bwzfXH dLoFdP" href="https://github.com/sataiva" data-reactid="17"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;color:#35495E;width:20px;height:20px;" data-reactid="18"><g data-reactid="19"><path d="m15.8 27.1q0 0.9-0.3 1.9t-1 1.7-1.6 0.7-1.6-0.7-1-1.7-0.2-1.9 0.3-1.8 0.9-1.7 1.6-0.7 1.6 0.7 1 1.7 0.3 1.8z m14.3 0q0 0.9-0.3 1.9t-1 1.7-1.6 0.7-1.6-0.7-1-1.7-0.2-1.9 0.2-1.8 1-1.7 1.6-0.7 1.6 0.7 1 1.7 0.3 1.8z m3.5 0q0-2.6-1.5-4.5t-4.2-1.9q-0.9 0-4.3 0.5-1.6 0.2-3.5 0.2t-3.5-0.2q-3.4-0.5-4.4-0.5-2.6 0-4.2 1.9t-1.5 4.5q0 2 0.7 3.5t1.8 2.3 2.7 1.3 3.2 0.7 3.3 0.1h3.7q1.9 0 3.4-0.1t3.1-0.7 2.7-1.3 1.8-2.3 0.7-3.5z m5-3.9q0 4.6-1.3 7.4-0.9 1.7-2.4 3t-3.1 1.9-3.8 1.1-3.8 0.4-3.8 0.1q-1.7 0-3.1 0t-3.3-0.3-3.4-0.7-3.1-1.1-2.7-1.8-1.9-2.6q-1.4-2.7-1.4-7.4 0-5.3 3-8.8-0.6-1.9-0.6-3.8 0-2.6 1.2-4.9 2.4 0 4.2 0.9t4.2 2.8q3.3-0.8 6.9-0.8 3.3 0 6.3 0.7 2.3-1.8 4.2-2.7t4.2-0.9q1.1 2.3 1.1 4.9 0 1.9-0.6 3.7 3 3.6 3 8.9z" data-reactid="20"></path></g></svg></a><a class="sc-bwzfXH dLoFdP" href="https://fb.com/sataiva" data-reactid="21"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;color:#35495E;width:20px;height:20px;" data-reactid="22"><g data-reactid="23"><path d="m29.4 0.3v5.9h-3.5q-1.9 0-2.6 0.8t-0.7 2.4v4.2h6.6l-0.9 6.6h-5.7v16.9h-6.8v-16.9h-5.7v-6.6h5.7v-4.9q0-4.1 2.3-6.4t6.2-2.3q3.3 0 5.1 0.3z" data-reactid="24"></path></g></svg></a><a class="sc-bwzfXH dLoFdP" href="https://www.youtube.com/channel/UC1F-wHR6SqoSjM7Nyxtkl7g" data-reactid="25"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;color:#35495E;width:20px;height:20px;" data-reactid="26"><g data-reactid="27"><path d="m24.7 27.8v4.7q0 1.5-0.9 1.5-0.5 0-1-0.5v-6.7q0.5-0.5 1-0.5 0.9 0 0.9 1.5z m7.5 0v1h-2v-1q0-1.5 1-1.5t1 1.5z m-21.5-4.9h2.3v-2.1h-6.9v2.1h2.3v12.7h2.3v-12.7z m6.4 12.7h2v-11h-2v8.4q-0.7 1-1.3 1-0.4 0-0.5-0.5 0-0.1 0-0.8v-8.1h-2v8.7q0 1.1 0.2 1.7 0.3 0.8 1.3 0.8 1.1 0 2.3-1.4v1.2z m9.6-3.3v-4.4q0-1.6-0.2-2.2-0.4-1.2-1.6-1.2-1.1 0-2.1 1.2v-4.9h-2v14.8h2v-1q1 1.2 2.1 1.2 1.2 0 1.6-1.2 0.2-0.6 0.2-2.3z m7.5-0.2v-0.3h-2q0 1.1-0.1 1.4-0.1 0.8-0.9 0.8-1 0-1-1.6v-1.9h4v-2.3q0-1.8-0.6-2.6-0.9-1.1-2.4-1.1-1.5 0-2.4 1.1-0.6 0.8-0.6 2.6v3.9q0 1.7 0.7 2.5 0.8 1.2 2.4 1.2 1.6 0 2.4-1.2 0.4-0.6 0.5-1.2 0-0.2 0-1.3z m-13.6-20.4v-4.7q0-1.5-0.9-1.5t-1 1.5v4.7q0 1.6 1 1.6t0.9-1.6z m16.1 16.8q0 5.2-0.6 7.8-0.3 1.3-1.3 2.2t-2.3 1q-4.1 0.5-12.4 0.5t-12.3-0.5q-1.3-0.1-2.3-1t-1.3-2.2q-0.6-2.5-0.6-7.8 0-5.2 0.6-7.8 0.3-1.3 1.3-2.2t2.3-1.1q4.1-0.4 12.3-0.4t12.4 0.4q1.3 0.2 2.3 1.1t1.3 2.2q0.6 2.5 0.6 7.8z m-22.3-28.5h2.3l-2.7 8.9v6.1h-2.2v-6.1q-0.4-1.6-1.4-4.7-0.8-2.3-1.5-4.2h2.4l1.6 5.9z m8.3 7.4v3.9q0 1.8-0.7 2.7-0.8 1.1-2.3 1.1-1.5 0-2.4-1.1-0.6-0.9-0.6-2.7v-3.9q0-1.8 0.6-2.6 0.9-1.1 2.4-1.1 1.5 0 2.3 1.1 0.7 0.8 0.7 2.6z m7.4-3.6v11.2h-2v-1.3q-1.2 1.4-2.3 1.4-1 0-1.3-0.8-0.2-0.5-0.2-1.7v-8.8h2v8.2q0 0.7 0.1 0.8 0 0.5 0.4 0.5 0.6 0 1.3-1v-8.5h2z" data-reactid="28"></path></g></svg></a></div></span></div></div><div class="sc-htoDjs hXIxij" data-reactid="29"><!-- react-empty: 30 --><h2 data-reactid="31">Upload captured image into amazons3 </h2><h4 data-reactid="32"><!-- react-text: 33 -->App.js file(for reference): <!-- /react-text --><!-- react-text: 34 --> <!-- /react-text --><a href="https://gist.github.com/PrakashMurugan/b443c44aea82f6639acbd12bf6612fdd" data-reactid="35"><!-- react-text: 36 --> <!-- /react-text --><!-- react-text: 37 -->Reactnative+S3+Imageupload<!-- /react-text --><!-- react-text: 38 --> <!-- /react-text --></a></h4><h4 data-reactid="39">1. Create a new app using Expo development tool</h4><p data-reactid="40"><a href="/reactnative-intro/reactnative-expo-introduction" data-reactid="41">In previous session,</a><!-- react-text: 42 -->we saw how to create a new React native app using expo tool.Using the same steps here i am gonna create a new app.<!-- /react-text --></p><img src="/static/newprojectemptyscreen.bfe0d772.png" alt="Expo new project folder structure" height="50%" width="50%" style="position:relative;left:25%;background-color:#000000;" data-reactid="43"/><h4 data-reactid="44">2. Create a camera preview using Expo camera component and capture picture</h4><p data-reactid="45"><!-- react-text: 46 -->I already wrote a guide about<!-- /react-text --><a href="/reactnative-intro/reactnative-expo-introduction" data-reactid="47"><!-- react-text: 48 --> <!-- /react-text --><!-- react-text: 49 -->how to create a Expo app <!-- /react-text --><!-- react-text: 50 --> <!-- /react-text --></a><!-- react-text: 51 -->and<!-- /react-text --><a href="/reactnative-intro/reactnative-expo-camera" data-reactid="52"><!-- react-text: 53 --> <!-- /react-text --><!-- react-text: 54 -->how to create and capture picture<!-- /react-text --><!-- react-text: 55 --> <!-- /react-text --></a><!-- react-text: 56 -->using Camera.<!-- /react-text --></p><img src="/static/FinalScreenShot.ff14bdd3.png" alt="Screen with capture button and functionlaityI" height="50%" width="50%" style="position:relative;left:25%;" data-reactid="57"/><h4 data-reactid="58">3. Upload pictures using React native AWS S3</h4><p data-reactid="59"><!-- react-text: 60 -->Here i am going to use the package<!-- /react-text --><!-- react-text: 61 --> <!-- /react-text --><a href="https://github.com/benjreinhart/react-native-aws3" data-reactid="62"><!-- react-text: 63 --> <!-- /react-text --><!-- react-text: 64 -->benjreinhart/react-native-aws3<!-- /react-text --></a><!-- react-text: 65 -->.<!-- /react-text --></p><p data-reactid="66"><!-- react-text: 67 -->Installation: <!-- /react-text --><b data-reactid="68">npm install --save react-native-aws3</b></p><h6 data-reactid="69">i. Import package,give correct values to amazon s3 bucket</h6><div data-reactid="70"><h3 data-reactid="71"></h3><div class="gatsby-highlight" data-reactid="72"><pre data-reactid="73"><code class="language-javascript" data-reactid="74">
import { RNS3 } from &#x27;react-native-aws3&#x27;;

const options = {
  keyPrefix: &quot;uploads/&quot;,
  bucket: &quot;your-bucket&quot;,
  region: &quot;us-east-1&quot;,
  accessKey: &quot;your-access-key&quot;,
  secretKey: &quot;your-secret-key&quot;,
  successActionStatus: 201
}
</code></pre></div></div><p data-reactid="75">Next we need to give file path.File name and type is important when uploading files into s3.</p><div data-reactid="76"><h3 data-reactid="77"></h3><div class="gatsby-highlight" data-reactid="78"><pre data-reactid="79"><code class="language-javascript" data-reactid="80">

const file = {
  // uri can also be a file system path (i.e. file://)
  uri: &quot;assets-library://asset/asset.PNG?id=655DBE66-8008-459C-9358-914E1FB532DD&amp;ext=PNG&quot;,
  name: &quot;image.png&quot;,
  type: &quot;image/png&quot;
}

</code></pre></div></div><p data-reactid="81">Next we need upload image by passing file and options to a function.</p><div data-reactid="82"><h3 data-reactid="83"></h3><div class="gatsby-highlight" data-reactid="84"><pre data-reactid="85"><code class="language-javascript" data-reactid="86">

RNS3.put(file, options).then(response =&gt; {
  if (response.status !== 201)
    throw new Error(&quot;Failed to upload image to S3&quot;);
  console.log(response.body);
  /**
   * {
   *   postResponse: {
   *     bucket: &quot;your-bucket&quot;,
   *     etag : &quot;9f620878e06d28774406017480a59fd4&quot;,
   *     key: &quot;uploads/image.png&quot;,
   *     location: &quot;https://your-bucket.s3.amazonaws.com/uploads%2Fimage.png&quot;
   *   }
   * }
   */
});

</code></pre></div></div><h4 data-reactid="87">4. Now we have to integrate our app with this package functionality</h4><p data-reactid="88">Add another button called &quot;Upload&quot; in the screen.And invoke &quot;upload&quot; function when it pressed.</p><p data-reactid="89">App.js</p><div data-reactid="90"><h3 data-reactid="91"></h3><div class="gatsby-highlight" data-reactid="92"><pre data-reactid="93"><code class="language-javascript" data-reactid="94">
// ... other code from the previous section

{this.state.switchValue ? (
  &lt;View style={styles.buttonsView}&gt;
    &lt;View style={styles.captureButtonView}&gt;
      &lt;TouchableOpacity
        style={styles.cameraButtons}
        onPress={this.snap}
      &gt;
        &lt;Text
          style={{ fontSize: 18, marginBottom: 10, color: &quot;white&quot; }}
        &gt;
          Capture
        &lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/View&gt;
    &lt;View style={styles.captureButtonView}&gt;
      &lt;TouchableOpacity
        style={styles.cameraButtons}
        onPress={this.upload}
      &gt;
        &lt;Text
          style={{ fontSize: 18, marginBottom: 10, color: &quot;white&quot; }}
        &gt;
          Upload
        &lt;/Text&gt;
      &lt;/TouchableOpacity&gt;
    &lt;/View&gt;
  &lt;/View&gt;
) : null}

// ... other code from the previous section
</code></pre></div></div><p data-reactid="95">Then we need to write a upload function.</p><p data-reactid="96">Create a state variable called imageuri to store captured image and send them as input to s3 upload function &quot;put&quot;.</p><p data-reactid="97">Suppose if you successfully captured image and stored that into cache and imageuri state variable, RNS3.put will return the response which has results of image upload. From that result object we can find our uploaded amazon s3 uri.</p><div data-reactid="98"><h3 data-reactid="99"></h3><div class="gatsby-highlight" data-reactid="100"><pre data-reactid="101"><code class="language-javascript" data-reactid="102">
upload = () =&gt; {
  const file = {
    uri: this.state.imageuri,
    name: 1523518218595.jpg,
    type: &quot;image/jpeg&quot;
  };
  const options = {
    keyPrefix: &quot;ts/&quot;,
    bucket: &quot;celeb-c4u&quot;,
    region: &quot;eu-west-1&quot;,
    accessKey: &quot;AKIAI2NHLR7A5W2R3OLA&quot;,
    secretKey: &quot;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&quot;,
    successActionStatus: 201
  };
  return RNS3.put(file, options)
    .then(response =&gt; {
      if (response.status !== 201)
        throw new Error(&quot;Failed to upload image to S3&quot;);
      else {
        console.log(
          &quot;Successfully uploaded image to s3. s3 bucket url: &quot;,
          response.body.postResponse.location
        );
        this.setState({
          url: response.body.postResponse.location
        });
      }
    })
    .catch(error =&gt; {
      console.log(error);
    });
};

</code></pre></div></div><h4 data-reactid="103">5. Show uploaded picture in the image component</h4><p data-reactid="104">For this i am going to check state variable &quot;imageuri&quot; if it&#x27;s empty show nothing or show image.</p><p data-reactid="105">Pass image url to Image component source property.</p><div data-reactid="106"><h3 data-reactid="107"></h3><div class="gatsby-highlight" data-reactid="108"><pre data-reactid="109"><code class="language-javascript" data-reactid="110">
&lt;Image
  source={{uri: this.state.imageuri}}
  style={styles.uploadedImage}
  resizeMode=&quot;contain&quot;
/&gt;
</code></pre></div></div><img src="/static/cameracapture.ecac099d.png" alt="Capturing image" height="50%" width="50%" data-reactid="111"/><img src="/static/uploadedimage.97be6f68.png" alt="Showing uploaded image" height="50%" width="50%" style="position:relative;left:10px;" data-reactid="112"/><h4 data-reactid="113"><!-- react-text: 114 -->App.js file<!-- /react-text --><!-- react-text: 115 --> <!-- /react-text --><a href="https://gist.github.com/PrakashMurugan/b443c44aea82f6639acbd12bf6612fdd" data-reactid="116"><!-- react-text: 117 --> <!-- /react-text --><!-- react-text: 118 -->Gist link<!-- /react-text --><!-- react-text: 119 --> <!-- /react-text --></a></h4><p data-reactid="120"></p><a style="border:none;" href="/reactnative-intro/reactnative-expo-camera" data-reactid="121"><div class="sc-EHOje exrfcB" data-reactid="122">Previous</div></a><a style="border:none;" href="/reactnative-intro/" data-reactid="123"><div class="sc-EHOje exrfcB" data-reactid="124">Next</div></a></div></main></div></div></div><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113976821-1', 'auto');
  ga('send', 'pageview');
      </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script></body></html>